<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mot de passe oublié - Plateforme Agricole</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

    <style>
        body {
            margin: 0;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            background: linear-gradient(to top, #ffd3b6, #dcedc1 50%, #a8e6cf);
            position: relative;
        }

        /* Soleil animé */
        .sun {
            position: absolute;
            top: 10%;
            left: 75%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #fff176, #ffd600);
            border-radius: 50%;
            box-shadow: 0 0 50px #ffd600;
            animation: rotateSun 60s linear infinite;
        }

        /* Collines */
        .hill {
            position: absolute;
            width: 200%;
            height: 200px;
            bottom: 0;
            left: -50%;
            background: radial-gradient(circle at 50% 0, #81c784, #388e3c);
            border-radius: 50%;
            animation: hillMove 30s ease-in-out infinite alternate;
        }

        /* Nuages */
        .cloud {
            position: absolute;
            background: #ffffffcc;
            border-radius: 50%;
            width: 120px;
            height: 60px;
            animation: cloudMove linear infinite;
            top: 15%;
        }
        .cloud:nth-child(1) { left: -150px; animation-duration: 70s; }
        .cloud:nth-child(2) { left: -300px; animation-duration: 90s; top: 20%; width: 180px; height: 80px; }
        .cloud:nth-child(3) { left: -500px; animation-duration: 100s; top: 10%; width: 150px; height: 70px; }

        /* Herbes ondulantes */
        .grass {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 50px;
            background: repeating-linear-gradient(
                    to right,
                    #388e3c,
                    #388e3c 2px,
                    #43a047 2px,
                    #43a047 4px
            );
            animation: grassSway 3s ease-in-out infinite alternate;
        }

        /* Fleurs */
        .flower {
            position: absolute;
            bottom: 40px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            animation: growFlower 4s ease-in-out infinite alternate, swayFlower 3s ease-in-out infinite alternate;
        }
        .flower::before, .flower::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background-color: inherit;
        }
        .flower::before { width: 15px; height: 15px; left: -10px; top: 0; }
        .flower::after { width: 15px; height: 15px; left: 10px; top: 0; }

        .flower:nth-child(1) { left: 20%; background-color: #ff9800; animation-delay: 0s; }
        .flower:nth-child(2) { left: 35%; background-color: #ff4081; animation-delay: 1s; }
        .flower:nth-child(3) { left: 50%; background-color: #ffeb3b; animation-delay: 2s; }
        .flower:nth-child(4) { left: 65%; background-color: #ff5722; animation-delay: 3s; }
        .flower:nth-child(5) { left: 80%; background-color: #4caf50; animation-delay: 1.5s; }

        /* Carte mot de passe oublié */
        .forgot-card {
            position: relative;
            z-index: 10;
            background-color: rgba(255,255,255,0.95);
            padding: 2.5rem;
            border-radius: 2rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.25);
            width: 100%;
            max-width: 420px;
            text-align: center;
            animation: fadeIn 0.8s ease-in-out;
        }
        .forgot-card h2 { color: #2e7d32; font-weight: 700; }
        .btn-forgot {
            background: linear-gradient(135deg, #43a047, #8bc34a);
            border: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .btn-forgot:hover {
            background: linear-gradient(135deg, #8bc34a, #43a047);
            transform: translateY(-2px);
        }
        .form-label { font-weight: 600; }
        .input-group-text { background: #e8f5e9; border: none; color: #2e7d32; }
        .form-control:focus { border-color: #8bc34a; box-shadow: 0 0 8px rgba(139,195,74,0.3); }
        .logo { width: 70px; height: 70px; margin-bottom: 15px; border-radius: 50%; }
        a { color: #2e7d32; text-decoration: none; }
        a:hover { text-decoration: underline; color: #1b5e20; }

        @keyframes fadeIn { from {opacity: 0; transform: scale(0.95);} to {opacity: 1; transform: scale(1);} }
        @keyframes rotateSun { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes hillMove { from { transform: translateX(0); } to { transform: translateX(-50px); } }
        @keyframes cloudMove { from { transform: translateX(0); } to { transform: translateX(200vw); } }
        @keyframes grassSway { from { transform: translateX(0); } to { transform: translateX(5px); } }
        @keyframes growFlower { from { transform: scale(0.2); } to { transform: scale(1); } }
        @keyframes swayFlower { from { transform: translateX(0); } to { transform: translateX(5px); } }
    </style>
</head>
<body>

<!-- Soleil, collines, nuages, herbes et fleurs -->
<div class="sun"></div>
<div class="hill"></div>
<div class="cloud"></div>
<div class="cloud"></div>
<div class="cloud"></div>
<div class="grass"></div>
<div class="flower"></div>
<div class="flower"></div>
<div class="flower"></div>
<div class="flower"></div>
<div class="flower"></div>

<!-- Carte mot de passe oublié -->
<div class="forgot-card">
    <img th:src="@{/images/utilisateurs/agriculture.jpeg}" alt="Logo" class="logo shadow-sm">
    <h2 class="mb-3">Mot de passe oublié</h2>
    <p class="text-muted mb-4">Entrez votre email et nous vous enverrons un lien pour réinitialiser votre mot de passe.</p>

    <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>

    <form th:action="@{/auth/oublier-password}" method="post">
        <div class="mb-3 text-start">
            <label class="form-label w-100">Email :</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                <input type="email" name="email" class="form-control" placeholder="Entrez votre email" required/>
            </div>
        </div>
        <button type="submit" class="btn btn-forgot w-100 text-white shadow-sm">
            <i class="bi bi-send-fill me-2"></i> Envoyer le lien
        </button>
    </form>

    <p class="mt-4">
        <a th:href="@{/auth/login}"><i class="bi bi-arrow-left-circle me-1"></i> Retour à la connexion</a>
    </p>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
