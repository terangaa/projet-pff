<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace D√©cideur</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to right, #e6f2e6, #ccf0cc);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        nav.navbar {
            background-color: #2d6a4f;
        }
        nav.navbar a.navbar-brand, nav.navbar span {
            color: #fff;
        }

        h2 {
            font-weight: 700;
            color: #1b4332;
            text-align: center;
            margin-bottom: 2rem;
        }

        .card {
            border-radius: 20px;
            transition: transform 0.4s, box-shadow 0.4s, background 1.5s;
            cursor: pointer;
            color: #fff;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 25px 40px rgba(0,0,0,0.2);
        }

        /* D√©grad√© anim√© pour toutes les cartes */
        .card-gradient-stat {
            background: linear-gradient(45deg, #52b788, #2d6a4f, #40916c);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
        }

        .card-gradient-alert {
            background: linear-gradient(45deg, #d90429, #ff4d6d, #b6031f);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
        }

        @keyframes gradientBG {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }

        .card-icon {
            font-size: 3rem;
            padding: 15px;
            border-radius: 50%;
            margin-bottom: 1rem;
            display: inline-block;
            background-color: rgba(255,255,255,0.2);
        }

        .btn {
            border: none;
            color: #fff;
            transition: 0.3s;
        }

        footer {
            background-color: #2d6a4f;
        }
        footer p { margin: 0; color: #fff; }

        .card-text { color: #fff; }

        /* Particules */
        #particlesCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
    </style>
</head>
<body>
<canvas id="particlesCanvas"></canvas>

<nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="#">Espace D√©cideur</a>
        <div class="d-flex align-items-center">
            <span class="me-3">Connect√© : <b th:text="${email}"></b></span>
            <a href="/auth/logout" class="btn btn-outline-light btn-sm">D√©connexion</a>
        </div>
    </div>
</nav>

<div class="container mt-5 position-relative" style="z-index:1;">
    <h2>üìä Bienvenue, D√©cideur</h2>

    <div class="row g-4">
        <!-- Alertes -->
        <div class="col-md-6">
            <div class="card shadow-sm border-0 text-center card-gradient-alert">
                <div class="card-body">
                    <div class="card-icon"><i class="bi bi-exclamation-triangle-fill"></i></div>
                    <h5 class="card-title">Alertes</h5>
                    <p class="card-text">Suivez toutes les alertes g√©n√©r√©es par le syst√®me.</p>
                    <a href="/alertes" class="btn btn-lg">Voir les alertes</a>
                </div>
            </div>
        </div>

        <!-- Statistiques -->
        <div class="col-md-6">
            <div class="card shadow-sm border-0 text-center card-gradient-stat">
                <div class="card-body">
                    <div class="card-icon"><i class="bi bi-bar-chart-fill"></i></div>
                    <h5 class="card-title">Statistiques</h5>
                    <p class="card-text">Consultez les statistiques globales de la plateforme.</p>
                    <a th:href="@{/decideur/statistiques}" class="btn btn-lg">Voir les statistiques</a>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="text-center py-3 mt-5">
    <p>¬© 2025 - Plateforme Agricole - Espace D√©cideur</p>
</footer>

<script>
    // Particules anim√©es
    const canvas = document.getElementById('particlesCanvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const particles = [];
    for(let i=0;i<120;i++){
        particles.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height,
            r: Math.random()*3+1,
            dx: (Math.random()-0.5)*0.7,
            dy: (Math.random()-0.5)*0.7
        });
    }

    function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p => {
            p.x += p.dx;
            p.y += p.dy;
            if(p.x<0 || p.x>canvas.width) p.dx*=-1;
            if(p.y<0 || p.y>canvas.height) p.dy*=-1;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
            ctx.fillStyle = 'rgba(64,145,108,0.3)';
            ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    animate();
</script>
</body>
</html>
