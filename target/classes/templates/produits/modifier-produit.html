<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Modifier un produit</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">

    <!-- Carte avec en-tête -->
    <div class="card shadow-lg rounded-4">
        <div class="card-header bg-primary text-white d-flex align-items-center">
            <i class="bi bi-pencil-square me-2 fs-4"></i>
            <h4 class="mb-0">Modifier un produit</h4>
        </div>

        <div class="card-body p-4">
            <form th:action="@{/produits/modifier/{id}(id=${produit.id})}"
                  th:object="${produit}" method="post" enctype="multipart/form-data">

                <!-- Nom -->
                <div class="mb-3">
                    <label for="nom" class="form-label fw-semibold">Nom du produit</label>
                    <input type="text" id="nom" th:field="*{nom}"
                           class="form-control shadow-sm"
                           placeholder="Saisir le nom du produit" required>
                </div>

                <!-- Description -->
                <div class="mb-3">
                    <label for="description" class="form-label fw-semibold">Description</label>
                    <textarea id="description" th:field="*{description}"
                              class="form-control shadow-sm" rows="3"
                              placeholder="Ex : Produit bio, sans pesticide..."></textarea>
                </div>

                <!-- Prix -->
                <div class="mb-3">
                    <label for="prix" class="form-label fw-semibold">Prix (€)</label>
                    <input type="number" id="prix" th:field="*{prix}" step="0.01"
                           class="form-control shadow-sm"
                           placeholder="Exemple : 19.99" required>
                </div>

                <!-- Stock -->
                <div class="mb-3">
                    <label for="stock" class="form-label fw-semibold">Stock</label>
                    <input type="number" id="stock" th:field="*{stock}"
                           class="form-control shadow-sm"
                           placeholder="Exemple : 50" required>
                </div>


                <!-- Image -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">Image actuelle</label><br>
                    <img th:if="${produit.image}" th:src="@{${produit.image}}"
                         alt="Image produit" class="img-thumbnail mb-2" style="max-width: 150px;">

                    <label for="image" class="form-label fw-semibold">Changer l’image</label>
                    <input type="file" id="image" name="imageFile"
                           class="form-control shadow-sm" accept="image/*">
                </div>

                <!-- Producteur -->
                <div class="mb-3">
                    <label for="producteur" class="form-label fw-semibold">Producteur</label>
                    <select id="producteur" th:field="*{producteur.id}"
                            class="form-select shadow-sm" required>
                        <option th:each="prod : ${producteurs}"
                                th:value="${prod.id}"
                                th:text="${prod.prenom + ' ' + prod.nom}"
                                th:selected="${prod.id} == ${produit.producteur.id}">
                        </option>
                    </select>
                </div>

                <!-- Boutons -->
                <div class="d-flex justify-content-end mt-4">
                    <a th:href="@{/produits}" class="btn btn-outline-secondary me-2">
                        <i class="bi bi-arrow-left"></i> Retour
                    </a>
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-check-circle"></i> Enregistrer
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>

<!-- Scripts Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
